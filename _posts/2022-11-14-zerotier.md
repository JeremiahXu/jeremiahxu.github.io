---
layout: post
read_time: true
show_date: true
title: Zerotieræ•™ç¨‹
date: 2022-11-14 11:44:00 +0800
description: ğŸ”†æ„å»ºè‡ªå·±çš„SD-WAN
img: posts/2022-11-14-zerotier/2022-11-14-11-55-54-4afbfbedab64034fef25014b639be5340b551d75.webp
tags: [ç½‘ç»œå·¥å…·]
author: Jeremiah
github: 
---

ğŸ”†æ„å»ºè‡ªå·±çš„SD-WAN

## SD-WANç®€ä»‹

SD-WANï¼Œå…¨åæ˜¯Software-Defined WANï¼Œè½¯ä»¶å®šä¹‰å¹¿åŸŸç½‘ã€‚WANï¼Œå°±æ˜¯Wide Area Networkï¼Œå¹¿åŸŸç½‘ã€‚

## SD-WANå·¥å…·

1. Zerotier

#### æ³¨å†Œ*Zerotier*

[https://www.zerotier.com](https://www.zerotier.com)

###### åŠ å…¥Zerotierç½‘ç»œ

```shell
zerotier-cli join 159924d630e1083c
```

##### è‡ªå»ºZerotierçš„ä¸­é—´MoonèŠ‚ç‚¹

[å®˜ç½‘æ–‡æ¡£é“¾æ¥](https://docs.zerotier.com/zerotier/moons)

Linuxï¼š

```shell
curl -s https://install.zerotier.com | sudo bash
```

ç”Ÿæˆmoon.jsonæ¨¡æ¿

```shell
cd /var/lib/zerotier-one
zerotier-idtool initmoon identity.public > moon.json 
```

vi ç¼–è¾‘Â `moon.json`ï¼Œä¿®æ”¹Â `â€œstableEndpointsâ€`Â ä¸º å…¬ç½‘çš„ IPï¼Œä»¥ IPv4 ä¸ºä¾‹ï¼Œè®°å¾—å¸¦å¼•å·ï¼š

```json
"stableEndpoints": [ "8.8.8.8/9993" ]
```

ç”Ÿæˆç­¾åæ–‡ä»¶

ç”¨åˆ°ä¸Šä¸€æ­¥ä¸­çš„ moon.jsonï¼Œ æ‰§è¡Œ

```shell
zerotier-idtool genmoon moon.json
```

å°† moon èŠ‚ç‚¹åŠ å…¥ç½‘ç»œ

åœ¨Zerotier å®‰è£…ç›®å½•ä¸‹ï¼ˆ/var/lib/zerotier-oneï¼‰å»ºç«‹æ–‡ä»¶å¤¹ moons.dï¼Œå°†ç”Ÿæˆçš„ .moonæ–‡ä»¶æ‹·è´è¿›å»ã€‚  
é‡å¯ zerotierï¼Œé‡å¯ç”µè„‘ã€‚

##### è‡ªå»ºZerotierçš„PlanetèŠ‚ç‚¹

ä¸€ã€å®‰è£…docker

Â Â Â Â ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…ï¼š

```bash
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
```

Â Â Â Â å®‰è£…docker-compose

```bash
sudo apt-get install docker-compose
```

äºŒã€å®‰è£…zerotier-planet

Â  Â  æ–¹æ³•ä¸€ï¼š

```bash
docker run --restart=on-failure:3 -d --name ztncui -e HTTP_PORT=4000 -e HTTP_ALL_INTERFACES=yes -e ZTNCUI_PASSWD=mrdoc.fun -p 4000:4000 keynetworks/ztncui
```

Â  Â  æ–¹æ³•äºŒï¼š

```bash
git clone https://github.com/Jonnyan404/zerotier-planet
cd zerotier-planet
docker-compose up -d
```

ä¸‰ã€åˆ›å»ºç½‘ç»œ

è®¿é—®Â `http://ip:4000`Â webç•Œé¢ï¼ŒæŒ‰ç…§æç¤ºä¿®æ”¹å¯†ç ã€‚

- ç”¨æˆ·å:admin
- å¯†ç :mrdoc.fun

![](../assets/img/posts/2022-11-14-zerotier/2022-11-15-17-11-48-image.png)

1.ç‚¹å‡»â€œAdd networkâ€ï¼Œè¾“å…¥åç§°ï¼Œç‚¹å‡»â€œCreate Networkâ€ï¼Œå³å¯åˆ›å»ºä¸€ä¸ªç½‘ç»œ

![](../assets/img/posts/2022-11-14-zerotier/2022-11-15-17-12-27-image.png)

2.ç‚¹å‡»â€œNetworksâ€ï¼Œç‚¹å‡»â€œeasy setupâ€ï¼Œå¯ä»¥æŒ‰ç…§æç¤ºå¡«å†™é»˜è®¤å€¼ï¼Œè€Œåå°±èƒ½åŠ å…¥æ­¤networkäº†ã€‚